<!DOCTYPE html>
<html>
<head>
    <title>Voice and Video Recorder</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
        h1 {
            color: #333;
        }
        #recordAudioButton, #recordVideoButton, #stopButton, #downloadButton, #clearButton, #playButton, #pauseButton {
            background-color: #4CAF50;
            color: white;
            padding: 15px 32px;
            text-align: center;
            font-size: 16px;
            margin: 10px;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }
        #recordAudioButton:hover, #recordVideoButton:hover, #stopButton:hover, #downloadButton:hover, #clearButton:hover, #playButton:hover, #pauseButton:hover {
            background-color: #45a049;
        }
        #stopButton {
            background-color: #f44336;
        }
        #recordingsList {
            margin-top: 20px;
        }
        audio, video {
            margin-top: 10px;
            max-width: 100%;
        }
        #recordingIndicator {
            color: red;
            font-size: 20px;
            margin-top: 10px;
        }
        #actions {
            margin-top: 20px;
        }
        .volume-control {
            margin-top: 10px;
        }
        .seek-bar {
            margin-top: 10px;
            width: 80%;
            display: inline-block;
        }
    </style>
</head>
<body>
    <h1>Voice and Video Recorder</h1>
    
    <button id="recordAudioButton">Record Audio</button>
    <button id="recordVideoButton">Record Video</button>
    <button id="stopButton" disabled>Stop Recording</button>
    <button id="downloadButton" disabled>Download Recording</button>
    <button id="clearButton" disabled>Clear Recordings</button>
    
    <div id="recordingsList"></div>
    <div id="timer">00:00</div>
    <div id="recordingIndicator"></div>
    <div id="actions">
        <button id="playButton" disabled>Play</button>
        <button id="pauseButton" disabled>Pause</button>
        <input type="range" class="volume-control" id="volumeControl" min="0" max="1" step="0.1" value="1">
        <div class="seek-bar">
            <input type="range" id="seekBar" min="0" value="0">
        </div>
        <label for="playbackSpeed">Playback Speed:</label>
        <select id="playbackSpeed">
            <option value="0.5">0.5x</option>
            <option value="1" selected>1x</option>
            <option value="1.5">1.5x</option>
            <option value="2">2x</option>
        </select>
    </div>
    
    <script>
        let mediaRecorder;
        let audioChunks = [];
        let videoChunks = [];
        let audioPlayer;
        let videoPlayer;
        let timerInterval;
        let startTime;
        let isAudioRecording = false;
        let isVideoRecording = false;
        const recordAudioButton = document.getElementById('recordAudioButton');
        const recordVideoButton = document.getElementById('recordVideoButton');
        const stopButton = document.getElementById('stopButton');
        const downloadButton = document.getElementById('downloadButton');
        const clearButton = document.getElementById('clearButton');
        const playButton = document.getElementById('playButton');
        const pauseButton = document.getElementById('pauseButton');
        const volumeControl = document.getElementById('volumeControl');
        const seekBar = document.getElementById('seekBar');
        const playbackSpeed = document.getElementById('playbackSpeed');
        const recordingsList = document.getElementById('recordingsList');
        const timerDisplay = document.getElementById('timer');
        const recordingIndicator = document.getElementById('recordingIndicator');
        const actions = document.getElementById('actions');

        recordAudioButton.addEventListener('click', startAudioRecording);
        recordVideoButton.addEventListener('click', startVideoRecording);
        stopButton.addEventListener('click', stopRecording);
        downloadButton.addEventListener('click', downloadRecording);
        clearButton.addEventListener('click', clearRecordings);
        playButton.addEventListener('click', playRecording);
        pauseButton.addEventListener('click', pauseRecording);
        volumeControl.addEventListener('input', setVolume);
        seekBar.addEventListener('input', seekPlayback);
        playbackSpeed.addEventListener('change', changePlaybackSpeed);

        async function startAudioRecording() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                mediaRecorder = new MediaRecorder(stream);
                startTime = Date.now();
                isAudioRecording = true;

                mediaRecorder.ondataavailable = function(e) {
                    audioChunks.push(e.data);
                };

                mediaRecorder.onstop = function() {
                    isAudioRecording = false;
                    handleRecordingStop();
                };

                startRecording();
                recordingIndicator.textContent = 'Recording Audio...';
                recordAudioButton.disabled = true;
                recordVideoButton.disabled = true;
            } catch (err) {
                console.error('Error accessing microphone:', err);
            }
        }

        async function startVideoRecording() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                mediaRecorder = new MediaRecorder(stream);
                startTime = Date.now();
                isVideoRecording = true;

                mediaRecorder.ondataavailable = function(e) {
                    videoChunks.push(e.data);
                };

                mediaRecorder.onstop = function() {
                    isVideoRecording = false;
                    handleRecordingStop();
                };

                startRecording();
                recordingIndicator.textContent = 'Recording Video...';
                recordAudioButton.disabled = true;
                recordVideoButton.disabled = true;
            } catch (err) {
                console.error('Error accessing camera:', err);
            }
        }

        function startRecording() {
            mediaRecorder.start();
            timerInterval = setInterval(updateTimer, 1000);
            stopButton.disabled = false;
        }

        function stopRecording() {
            mediaRecorder.stop();
            stopButton.disabled = true;
        }

        function handleRecordingStop() {
            clearInterval(timerInterval);
            const audioBlob = new Blob(audioChunks, { 'type' : 'audio/ogg; codecs=opus' });
            const videoBlob = new Blob(videoChunks, { 'type' : 'video/webm' });
            const audioURL = window.URL.createObjectURL(audioBlob);
            const videoURL = window.URL.createObjectURL(videoBlob);
            if (isAudioRecording) {
                audioPlayer = new Audio(audioURL);
                audioPlayer.controls = true;
                recordingsList.appendChild(audioPlayer);
                downloadButton.disabled = false;
                clearButton.disabled = false;
                recordingIndicator.textContent = '';
                playButton.disabled = false;
                pauseButton.disabled = false;
                seekBar.max = audio
playButton.disabled = false;
                pauseButton.disabled = false;
                seekBar.max = audioPlayer.duration;
                audioPlayer.addEventListener('timeupdate', updateSeekBar);
            }
            if (isVideoRecording) {
                videoPlayer = document.createElement('video');
                videoPlayer.controls = true;
                videoPlayer.src = videoURL;
                recordingsList.appendChild(videoPlayer);
                downloadButton.disabled = false;
                clearButton.disabled = false;
                recordingIndicator.textContent = '';
                playButton.disabled = false;
                pauseButton.disabled = false;
                seekBar.max = videoPlayer.duration;
                videoPlayer.addEventListener('timeupdate', updateSeekBar);
            }
            audioChunks = [];
            videoChunks = [];
            recordAudioButton.disabled = false;
            recordVideoButton.disabled = false;
        }

        function downloadRecording() {
            const blob = isAudioRecording ? new Blob(audioChunks, { 'type' : 'audio/ogg; codecs=opus' }) :
                                            new Blob(videoChunks, { 'type' : 'video/webm' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = isAudioRecording ? 'audio_recording.ogg' : 'video_recording.webm';
            document.body.appendChild(a);
            a.click();
            window.URL.revokeObjectURL(url);
        }

        function playRecording() {
            if (isAudioRecording) {
                audioPlayer.play();
            }
            if (isVideoRecording) {
                videoPlayer.play();
            }
        }

        function pauseRecording() {
            if (isAudioRecording) {
                audioPlayer.pause();
            }
            if (isVideoRecording) {
                videoPlayer.pause();
            }
        }

        function setVolume() {
            const volume = volumeControl.value;
            if (isAudioRecording) {
                audioPlayer.volume = volume;
            }
            if (isVideoRecording) {
                videoPlayer.volume = volume;
            }
        }

        function seekPlayback() {
            const seekTime = seekBar.value;
            if (isAudioRecording) {
                audioPlayer.currentTime = seekTime;
            }
            if (isVideoRecording) {
                videoPlayer.currentTime = seekTime;
            }
        }

        function updateSeekBar() {
            const currentTime = isAudioRecording ? audioPlayer.currentTime : videoPlayer.currentTime;
            seekBar.value = currentTime;
        }

        function changePlaybackSpeed() {
            const speed = playbackSpeed.value;
            if (isAudioRecording) {
                audioPlayer.playbackRate = speed;
            }
            if (isVideoRecording) {
                videoPlayer.playbackRate = speed;
            }
        }

        function updateTimer() {
            const elapsedTime = Date.now() - startTime;
            const seconds = Math.floor(elapsedTime / 1000);
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            const formattedTime = padZero(minutes) + ":" + padZero(remainingSeconds);
            timerDisplay.textContent = formattedTime;
        }

        function padZero(value) {
            return value < 10 ? '0' + value : value;
        }

        function clearRecordings() {
            recordingsList.innerHTML = '';
            clearButton.disabled = true;
            downloadButton.disabled = true;
        }
    </script>
</body>
</html>